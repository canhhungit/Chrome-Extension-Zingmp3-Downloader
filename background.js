(function(){chrome.runtime.onMessage.addListener((function(e,t,o){switch(e.message){case"get_cookies":return chrome.cookies.getAll({url:e.url},(function(e){o({cookies:e})})),!0;case"set_cookies":chrome.cookies.set({url:e.url,name:e.name,value:e.value,secure:!0,path:"/",httpOnly:!1});break;case"open_popup":chrome.windows.create({url:"popup.html",type:"popup",left:Math.round((e.width-500)/2),top:Math.round((e.height-500)/2),width:500,height:500}),chrome.windows.getCurrent((function(e){chrome.windows.update(e.id,{focused:!0})})),setTimeout((()=>{chrome.runtime.sendMessage({data:e.data})}),1e3);break}})),chrome.webNavigation.onHistoryStateUpdated.addListener((function(e){0===e.frameId&&chrome.tabs.query({active:!0,currentWindow:!0},(function(t){chrome.tabs.sendMessage(t[0].id,{url:e.url})}))}))})();